# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Overview

This is a collection of reusable GitHub Actions for the icanbwell organization. Each action is a standalone TypeScript module that gets compiled to JavaScript for use in GitHub workflows.

## Commands

```bash
# Install dependencies
yarn install

# Build all actions (compiles TypeScript to JavaScript bundles)
yarn build

# Run linting
yarn lint
```

## Architecture

### Action Structure
Each GitHub Action follows this pattern:
- `/src/{action-name}.ts` - TypeScript source code
- `/{action-name}/action.yaml` - GitHub Action metadata and configuration
- `/{action-name}/index.js` - Compiled JavaScript entry point (generated by build)

### Key Actions
- **get-latest-release-tag**: Retrieves the latest release tag from a repository
- **increment-version**: Handles semantic version bumping
- **deploy-to-env**: Composite action for deploying containers to environments
- **docker-publish**: Handles Docker image publishing workflows

### Development Workflow
1. Write TypeScript code in `/src/`
2. Run `yarn build` to compile to JavaScript bundles using @vercel/ncc
3. The build process creates `index.js` files in each action directory
4. Commit both the source and compiled files (GitHub Actions require the compiled JS)

### Important Patterns
- Use `@actions/core` for input/output handling and error reporting
- Use `@actions/github` for GitHub API interactions
- Actions must export inputs/outputs in their `action.yaml` file
- Composite actions (like deploy-to-env) reference other actions using relative paths

### Testing Note
This repository currently has no test suite. When adding new functionality, manual testing in a workflow is required.